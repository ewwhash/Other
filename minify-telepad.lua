whiteList={"ewwhash","Chesh1r3","NemoCrazy87","hohserg"}symbol="?"side=3;bufferSide=3;ejectSide=1;version="selector"local function a(b)return component.proxy(component.list(b)())end;local c,d,e,f,g=a("inventory_controller"),a("robot"),a("redstone"),a("chat"),a("tractor_beam")local h=d.inventorySize()local i,j,k,l={},1,0;local function m(n,o)return n.label<o.label end;local function p(q,r)d.select(r)f.say("§7Выкидываю мусор: '§a"..q.."§7'...")d.drop(0)d.select(1)end;local function s(r,t)local u=c.getStackInInternalSlot(r)if u then if u.name=="EnderIO:itemCoordSelector"or u.name=="enderio:item_location_printout"then local v=#i+1;i[v]={label=u.label,slot=r}i[v].title="§f'§a"..u.label.."§f'"i[v].page=j;k=k+1;if k==8 then j,k=j+1,0 end;table.sort(i,m)if t then f.say("§7Обнаружена новая точка '§a"..u.label.."§7'!")end else p(u.label,r)end end end;local function w()i={}local x,counter=1,0;for r=1,h do s(r)end;f.say("Сканирование завершено. Точек найдено: "..#i)end;local function y()f.say("§7Телепорт на точку: §c?tp §bточка§7.")f.say("§7Список точек: §c?list §bстраница§7.")f.say("§7Извлечь точку: §c?eject §bточка§7.")f.say("§7Добавление точки: §c?addpoint§7.")f.say("§7Обновление точек: §c?update§7.")end;local function z()e.setOutput(side,15)os.sleep(.1)e.setOutput(side,0)end;local function A(v)f.say("§7Подготовка к телепортации на '§a"..i[v].label.."§7'...")d.select(i[v].slot)if version=="selector"then c.equip()d.use(side,true)z()c.equip()elseif version=="paper"then d.drop(side)z()counter=0;while true do local u=c.getStackInSlot(bufferSide,1)counter=counter+1;if u and u.name=="enderio:item_location_printout"then d.suck(bufferSide)break end;if counter==500 then f.say("§cНе могу достать распечатку!")counter=0 end;os.sleep(0)end end;d.select(1)end;local function B(q)local C=false;local D=unicode.len(q)for v=1,#i do if unicode.sub(unicode.lower(i[v].label),1,D)==q then C=v;break end end;if C then return C else f.say("§cТочки "..q.." не существует!")end end;local function E(q)if q then q=unicode.lower(q)local v=B(q)if v then l=q;A(v)else y()end elseif l then A(l)else y()end end;local function F()if g.suck()then local G,r=event.pull(.3,"inventory_changed")if G then s(r,true)end end end;local function H(q)if q then local v=B(unicode.lower(q))if v then f.say("§7Извлечение точки '§a"..i[v].label.."§7'...")d.select(i[v].slot)d.drop(ejectSide)d.select(1)table.remove(i,v)end else y()end end;local function I(x)if x then x=tonumber(x)if not x then y()else x=math.floor(x)end else x=1 end;if x then if x>j then f.say("§cВсего "..j.." страниц.")else f.say("§6§lТочки - Страница "..x.."/"..j)for v=1,#i do if i[v].page==x then f.say(i[v].title)end end end end end;local J={help=y,tp=E,list=I,update=w,addpoint=F,eject=H}for K=1,#whiteList do whiteList[whiteList[K]],whiteList[K]=true,nil end;d.select(1)f.setName("§eTelepad§7§o")w()while true do local L={computer.pullSignal()}if L[1]=="chat_message"and whiteList[L[3]]then f.setName("§eTelepad§7§o")if L[4]:sub(1,1)==symbol then local M=L[4]:sub(2,#L[4])local N={}for O in M:gsub("^(.-)%s*$","%1"):gmatch("%s*([^%s]+)")do N[#N+1]="%q":format(O):gsub('"','')end;if J[N[1]]then J[N[1]](table.unpack(N,2,#N))else y()end end end end
